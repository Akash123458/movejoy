<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="seat.css" />
    <link rel="shortcut icon" href="logo.png" type="image/x-icon" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css"
      integrity="sha512-Kc323vGBEqzTmouAECnVceyQqyqdsSiqLQISBL29aUW4U/M7pSPA/gEUZQqv1cwx4OnYxTxve5UMg5GT6L4JJg=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <title>Document</title>
  </head>
  <body>
    <div class="seatnavbar">
      <a class="back-button" href="">
        <i class="fa-solid fa-angle-left"></i>Back
      </a>
      <div class="movie-info">
        <span id="movie-name"></span>
        <span id="movie-genre"></span>
      </div>
    </div>
    <div class="container">
      <div class="seats-container">
        <!-- Recliner Section -->
         <h1>Select Seats</h1>
        <div class="section recliner">
          <h3>Recliner (Rs. 300)</h3>
          <div class="row">
            <span class="row-label">A</span>
            <div class="seat" data-price="300" data-seatnum="A1"></div>
            <div class="seat" data-price="300" data-seatnum="A2"></div>
            <div class="seat" data-price="300" data-seatnum="A3"></div>
            <div class="seat" data-price="300" data-seatnum="A4"></div>
            <div class="seat" data-price="300" data-seatnum="A5"></div>
            <div class="seat" data-price="300" data-seatnum="A6"></div>
            <div class="seat" data-price="300" data-seatnum="A7"></div>
            <div class="seat" data-price="300" data-seatnum="A8"></div>
            <div class="seat" data-price="300" data-seatnum="A9"></div>
            <div class="seat" data-price="300" data-seatnum="A10"></div>
          </div>
          <div class="row">
            <span class="row-label">B</span>
            <div class="seat" data-price="300" data-seatnum="B1"></div>
            <div class="seat" data-price="300" data-seatnum="B2"></div>
            <div class="seat" data-price="300" data-seatnum="B3"></div>
            <div class="seat" data-price="300" data-seatnum="B4"></div>
            <div class="seat" data-price="300" data-seatnum="B5"></div>
            <div class="seat" data-price="300" data-seatnum="B6"></div>
            <div class="seat" data-price="300" data-seatnum="B7"></div>
            <div class="seat" data-price="300" data-seatnum="B8"></div>
            <div class="seat" data-price="300" data-seatnum="B9"></div>
            <div class="seat" data-price="300" data-seatnum="B10"></div>
          </div>
        </div2
          <!-- prime Section -->
        <div class="section prime">
          <h3>Prime (Rs. 250)</h3>
          <div class="row">
            <span class="row-label">C</span>
            <div class="seat" data-price="250" data-seatnum="C1"></div>
            <div class="seat" data-price="250" data-seatnum="C2"></div>
            <div class="seat" data-price="250" data-seatnum="C3"></div>
            <div class="seat" data-price="250" data-seatnum="C4"></div>
            <div class="seat" data-price="250" data-seatnum="C5"></div>
            <div class="seat" data-price="250" data-seatnum="C6"></div>
            <div class="seat" data-price="250" data-seatnum="C7"></div>
            <div class="seat" data-price="250" data-seatnum="C8"></div>
            <div class="seat" data-price="250" data-seatnum="C9"></div>
            <div class="seat" data-price="250" data-seatnum="C10"></div>
          </div>
          <div class="row">
            <span class="row-label">D</span>
            <div class="seat" data-price="250" data-seatnum="D1"></div>
            <div class="seat" data-price="250" data-seatnum="D2"></div>
            <div class="seat" data-price="250" data-seatnum="D3"></div>
            <div class="seat" data-price="250" data-seatnum="D4"></div>
            <div class="seat" data-price="250" data-seatnum="D5"></div>
            <div class="seat" data-price="250" data-seatnum="D6"></div>
            <div class="seat" data-price="250" data-seatnum="D7"></div>
            <div class="seat" data-price="250" data-seatnum="D8"></div>
            <div class="seat" data-price="250" data-seatnum="D9"></div>
            <div class="seat" data-price="250" data-seatnum="D10"></div>
          </div>
          <div class="row">
            <span class="row-label">E</span>
            <div class="seat" data-price="250" data-seatnum="E1"></div>
            <div class="seat" data-price="250" data-seatnum="E2"></div>
            <div class="seat" data-price="250" data-seatnum="E3"></div>
            <div class="seat" data-price="250" data-seatnum="E4"></div>
            <div class="seat" data-price="250" data-seatnum="E5"></div>
            <div class="seat" data-price="250" data-seatnum="E6"></div>
            <div class="seat" data-price="250" data-seatnum="E7"></div>
            <div class="seat" data-price="250" data-seatnum="E8"></div>
            <div class="seat" data-price="250" data-seatnum="E9"></div>
            <div class="seat" data-price="250" data-seatnum="E10"></div>
          </div>
          <div class="row">
            <span class="row-label">F</span>
            <div class="seat" data-price="250" data-seatnum="F1"></div>
            <div class="seat" data-price="250" data-seatnum="F2"></div>
            <div class="seat" data-price="250" data-seatnum="F3"></div>
            <div class="seat" data-price="250" data-seatnum="F4"></div>
            <div class="seat" data-price="250" data-seatnum="F5"></div>
            <div class="seat" data-price="250" data-seatnum="F6"></div>
            <div class="seat" data-price="250" data-seatnum="F7"></div>
            <div class="seat" data-price="250" data-seatnum="F8"></div>
            <div class="seat" data-price="250" data-seatnum="F9"></div>
            <div class="seat" data-price="250" data-seatnum="F10"></div>
          </div>
          <div class="row">
            <span class="row-label">G</span>
            <div class="seat" data-price="250" data-seatnum="G1"></div>
            <div class="seat" data-price="250" data-seatnum="G2"></div>
            <div class="seat" data-price="250" data-seatnum="G3"></div>
            <div class="seat" data-price="250" data-seatnum="G4"></div>
            <div class="seat" data-price="250" data-seatnum="G5"></div>
            <div class="seat" data-price="250" data-seatnum="G6"></div>
            <div class="seat" data-price="250" data-seatnum="G7"></div>
            <div class="seat" data-price="250" data-seatnum="G8"></div>
            <div class="seat" data-price="250" data-seatnum="G9"></div>
            <div class="seat" data-price="250" data-seatnum="G10"></div>
          </div>
        </div>
        <!-- Classic Section -->
        <div class="section classic">
          <h3>Classic (Rs. 200)</h3>
          <div class="row">
            <span class="row-label">H</span>
            <div class="seat" data-price="200" data-seatnum="H1"></div>
            <div class="seat" data-price="200" data-seatnum="H2"></div>
            <div class="seat" data-price="200" data-seatnum="H3"></div>
            <div class="seat" data-price="200" data-seatnum="H4"></div>
            <div class="seat" data-price="200" data-seatnum="H5"></div>
            <div class="seat" data-price="200" data-seatnum="H6"></div>
            <div class="seat" data-price="200" data-seatnum="H7"></div>
            <div class="seat" data-price="200" data-seatnum="H8"></div>
            <div class="seat" data-price="200" data-seatnum="H9"></div>
            <div class="seat" data-price="200" data-seatnum="H10"></div>
          </div>
          <div class="row">
            <span class="row-label">I</span>
            <div class="seat" data-price="200" data-seatnum="I1"></div>
            <div class="seat" data-price="200" data-seatnum="I2"></div>
            <div class="seat" data-price="200" data-seatnum="I3"></div>
            <div class="seat" data-price="200" data-seatnum="I4"></div>
            <div class="seat" data-price="200" data-seatnum="I5"></div>
            <div class="seat" data-price="200" data-seatnum="I6"></div>
            <div class="seat" data-price="200" data-seatnum="I7"></div>
            <div class="seat" data-price="200" data-seatnum="I8"></div>
            <div class="seat" data-price="200" data-seatnum="I9"></div>
            <div class="seat" data-price="200" data-seatnum="I10"></div>
          </div>
        </div>
        <div class="box">
          <span>All eyes this way please!</span>
        </div>
      </div>
    </div>
    <div class="summary">
      <p>Total Seats Selected: <span id="total-seats">0</span></p>
    </div>
    <div class="pay-button">
      <button onclick="payment()">
        Pay Rs. <span id="total-price">0</span>
      </button>
    </div>
    <script>
      const payment = async () => {
        const authLink = document.getElementById("log");
        const token = localStorage.getItem("token");

        if (token) {
          const amount = document.getElementById("total-price").textContent;
          console.log(amount);
          const response = await fetch(
            "http://localhost:3000/create-payment-intent",
            {
              method: "POST",
              headers: {
                "Content-Type": "application/json",
              },
              body: JSON.stringify({
                amount: amount,
              }),
            }
          );
          const data = await response.json();

          console.log(data.data.url);

          window.open(data.data.url, "_self");
        } else {
          window.open("http://127.0.0.1:5503/login.html", "_self");
        }
      };
    </script>
     <script src="script.js"></script>
  </body>
</html>
